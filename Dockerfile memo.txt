일반적인 도커 워크 플로우 (개발부터 배포까지)
23
1. Dockerfile 및 소스코드 작성
애플리케이션 코드와, 이 코드를 어떻게 이미지로 만들지를 정의하는 Dockerfile을 작성합니다

2. docker build로 이미지 빌드
작성된 Dockerfile을 사용하여 로컬 컴퓨터에 도커 이미지를 생성합니다
docker build -t my-app:1.0 .

3. (선택/권장) docker-compose up 으로 로컬 테스트
생성된 이미지가 정상적으로 동작하는지, 다른 서비스(예: 데이터베이스)와 
잘 연동되는지 docker-compose.yml 파일을 작성하여 로컬환경에서 테스트합니다.
이 단계는 이미지를 도커 허브에 올리기 전에 검증하는 과정입니다
docker-compose up

4. docker tag로 이미지에 이름 붙이기
도커 허브에 올리기 위해 이미지에 [Docker Hub ID]/[이미지 이름]:[태그] 형식으로 
새로운 이름을 붙여줍니다
docker tag my-app:1.0 your-docker-id/my-app:1.0

5. docker push로 Docker Hub에 업로드
태그에 붙인 이미지를 도커 허브에 업로드하여 다른 사람이나 서버에서 사용할 수 있도록 공유합니다
docker push your-docker-id/my-app:1.0

6.(배포) 서버에서 이미지 받고 실행
운영 서버나 다른 개발자의 PC에서 도커 허브에 올라간 이미지를 docker pull 또는 docker-compose pull
명령어로 내려받은 후,
docker run 또는 docker-compose up으로 실행하여 애플리케이션을 배포합니다.




로컬 개발 및 테스트
코드 수정 -> docker build -> docker-compose up
코드를 수정하고, 이미지를 다시 빌드한 후, 로컬에서 여러 컨테이너를 함께 실행하여
테스트를 하는 과정입니다. 도커 허브는 사용되지 않습니다



이미지 공유 및 배포
docker build -> (로컬 테스트) -> docker tag -> docker push

이미지를 빌드하고 테스트한 뒤, 도커 허브에 업로드하여 공유 및 배포 준비를
 마치는 과정입니다.











Dockerfile, docker-compose.yml, docker-compose-deploy.yml 워크플로우

각 파일의 명확한 역할
1. Dockerfile : 이미지 설계도
목적: 내 애플리케이션(소스코드, 라이브러리, 설정 등)을 담은 도커 이미지를
만드는 방법을 정의합니다
역할: 어떤 OS를 기반으로, 어떤 파일을 복사하고, 어떤 명령어를 실행해서
최종적으로 실행가능한 "패키지"를 만들지 명시합니다.
이 파일은 모든 환경에서 동일하게 사용됩니다.

2. docker-compose.yml : 로컬 개발 환경 설명서
목적: 개발자 PC에서 여러 컨테이너(예 : 내 앱, 데이터베이스, 캐시 서버)를
쉽고 편하게 실행하고 테스트하기 위해 사용됩니다.

주요 특징
build: 구문을 사용하여 Dockerfile을 직접 빌드해서 이미지를 만듭니다.
소스코드 실시간 반영을 위해 볼륨(volumes)을 연결합니다. (./app:usr/src/app).
개발에 필요한 환경 변수(env)나 포트(ports)를 설정합니다

3. docker-compose-deploy.yml : 실서버 배포 설명서
목적:운영(Production)서버에 컨테이너를 배포하고 실행하기 위해 사용됩니다.
주요 특징:
build: . 구문을 사용하지 않고, 미리 빌드해서 도커 허브(Docker Hub)에 
올려둔 이미지를 image: your-id/my-app:1.0 처럼 가져와서 사용합니다
(서버에서 직접 빌드하는 것은 비효율적이고 위험합니다)
소스코드 볼륨을 연결하지 않습니다. 
이미지가 모든 코드를 포함하고 있기 때문입니다.
운영 환경에 맞는 데이터베이스 비밀번호, API 키 등 민감한 정보를 설정합니다.
서버가 재시작 되어도 컨테이너가 자동으로 다시 실행되도록 
restart: always 같은 옵션을 포함합니다










이 프로젝트의 도커 워크 플로우


왜 파일을 분리했는가?
docker-compose.yml (개발용) : 개발자의 PC에서 사용합니다.
소스코드를 수정하면 바로바로 빌드하고, 데이터베이스 내부를 쉽게 확인하며,
디버깅에 용이하도록 설정되어 있습니다.

docker-compose-deploy.yml(배포용)
실제 운영 서버에서 사용합니다. 
이미 빌드되어 안정성이 검증된 이미지를 Docker Hub에서 가져와 실행하는 데
초점을 맞춥니다.
성능, 안정성, 보안을 위한 설정들로 구성되어 있습니다. 
